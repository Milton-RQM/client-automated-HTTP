<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="360" viewBox="0 0 1000 360">
  <style>
    .box { fill:#f6f9ff; stroke:#2b6cb0; stroke-width:2px; rx:8; }
    .box-etl { fill:#fff8e1; stroke:#f6ad55; stroke-width:2px; rx:8; }
    .box-report { fill:#f3e8ff; stroke:#9f7aea; stroke-width:2px; rx:8; }
    .text { font-family: Inter, Arial, sans-serif; font-size:14px; fill:#111827 }
    .title { font-weight:700; font-size:13px }
    .small { font-size:12px; fill:#374151 }
    .arrow { stroke:#4a5568; stroke-width:2; fill:none; marker-end:url(#arrowhead) }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4a5568" />
    </marker>
  </defs>

  <!-- Left column: Ingestión -->
  <rect class="box" x="30" y="40" width="200" height="80" />
  <text class="text title" x="60" y="65">Módulo 01</text>
  <text class="text" x="60" y="88">Ingestión HTTP</text>
  <text class="small" x="60" y="108">httpbin.org</text>

  <!-- Generación Logs -->
  <rect class="box" x="270" y="40" width="200" height="80" />
  <text class="text title" x="300" y="65">Módulo 02</text>
  <text class="text" x="300" y="88">Generación de logs</text>
  <text class="small" x="300" y="108">generar_datos.py → http_logs.jsonl</text>

  <!-- KPI Processing -->
  <rect class="box" x="510" y="40" width="200" height="80" />
  <text class="text title" x="540" y="65">Módulo 03</text>
  <text class="text" x="540" y="88">KPI Processing</text>
  <text class="small" x="540" y="108">calcular_kpis.py → kpi_por_endpoint_dia.csv</text>

  <!-- ETL + Reporting -->
  <rect class="box-etl" x="190" y="190" width="270" height="90" />
  <text class="text title" x="230" y="215">Módulo 04</text>
  <text class="text" x="230" y="238">ETL (Pentaho)</text>
  <text class="small" x="230" y="258">t_load_kpi.ktr  •  j_daily_kpi.kjb</text>

  <rect class="box-report" x="510" y="190" width="240" height="90" />
  <text class="text title" x="540" y="215">Módulo 05</text>
  <text class="text" x="540" y="238">Reporting</text>
  <text class="small" x="540" y="258">generar_reporte.py → kpi_diario.html</text>

  <!-- SQLite DB -->
  <rect x="790" y="210" width="160" height="60" rx="6" fill="#ffffff" stroke="#a0aec0" />
  <text class="text title" x="810" y="235">SQLite DB</text>
  <text class="small" x="810" y="255">stg_kpi_endpoint_dia / fct_kpi_endpoint_dia</text>

  <!-- Arrows top row -->
  <path class="arrow" d="M230 80 L270 80" />
  <path class="arrow" d="M470 80 L510 80" />

  <!-- From KPI down to ETL and Report -->
  <path class="arrow" d="M610 120 L610 190" />
  <path class="arrow" d="M610 145 L460 190" />
  <path class="arrow" d="M610 145 L630 190" />

  <!-- From ETL to SQLite -->
  <path class="arrow" d="M460 235 L790 235" />

  <!-- From KPI to Report flow -->
  <path class="arrow" d="M710 120 L710 190" />

  <!-- Labels -->
  <text class="small" x="420" y="165">kpi_por_endpoint_dia.csv</text>

  <!-- Border -->
  <rect x="10" y="10" width="980" height="340" rx="10" fill="none" stroke="#e2e8f0" />
</svg>